<!DOCTYPE html>
<html>
<head>
	<!-- Smalldb Editor plugin -->
	<link rel="stylesheet" href="../external/font-awesome-4.3.0/css/font-awesome.min.css" type="text/css">
	<link rel="stylesheet" href="../css/smalldb_reset.css" type="text/css">
	<link rel="stylesheet" href="../css/smalldb_editor.css" type="text/css">
	<script type="text/javascript" src="../external/jquery.js"></script>
	<script type="text/javascript" src="../external/gettext.js"></script>
	<script type="text/javascript" src="../external/dagre.js"></script>
	<script type="text/javascript" src="../external/c2s.js"></script>
	<script type="text/javascript" src="../js/classes/geometry.js"></script>
	<script type="text/javascript" src="../js/classes/spline.js"></script>
	<script type="text/javascript" src="../js/classes/tarjan.js"></script>
	<script type="text/javascript" src="../js/classes/state.js"></script>
	<script type="text/javascript" src="../js/classes/action.js"></script>
	<script type="text/javascript" src="../js/classes/transition.js"></script>
	<script type="text/javascript" src="../js/classes/editor.js"></script>
	<script type="text/javascript" src="../js/classes/canvas.js"></script>
	<script type="text/javascript" src="../js/classes/storage.js"></script>
	<script type="text/javascript" src="../js/classes/toolbar.js"></script>
	<script type="text/javascript" src="../js/classes/smalldb_editor.js"></script>
	<script type="text/javascript" src="../js/smalldb_editor.js"></script>
	<script type="text/javascript" src="../js/init.js"></script>

    <style>
        body, div, td, th, p, h1, h2, h3, h4, h5, h6, li, dd, dt, a, label { font-family: "DejaVu Sans", "Verdana", sans-serif; font-size: 10pt; }
        a { text-decoration: underline; color: #228; }
        a:visited { color: #336; }
        h1, h2, h3, h4, h5, h6 {
            color: #258;
            font-weight: normal;
            text-shadow: 1px 1px 1px #aaa;
        }

        h1 a, h2 a, h3 a, h4 a, h5 a, h6 a,
        h1 a:visited, h2 a:visited, h3 a:visited, h4 a:visited, h5 a:visited, h6 a:visited {
            color: #258;
            text-decoration: none;
        }

        h1 {
            font-size: 2.5em;
            font-weight: normal;
            text-decoration: none;
            font-variant: small-caps;
            margin: 0em;
            padding: 0em;
        }

        h2 {
            font-size: 1.6em;
            margin: 1.4em 0em 1em 0em;
        }

        h3 {
            font-size: 1.3em;
            margin: 1.7em 0em 1em 0em;
        }

        h4 {
            font-size: 1.1em;
            margin: 1.9em 0em 1em 0em;
        }
    </style>
</head>
<body>

<h1>Smalldb Editor Examples</h1>

<h2>Article machine</h2>

<!-- todo view only mode viditelny cely automat, nenastavovat vysku / sirku - dopocitat automaticky dle boundig boxu -->

<textarea id=".main.main.admin.main.training_dummy" data-smalldb-editor-opts='{"viewOnly": true, "scrollLeft": 300, "scrollTop": -50}' class="smalldb_editor" cols="25" rows="80" style="display: block; width: 900px; height: 600px">
	{"states":{"draft":{"state":"draft","label":"Draft","color":"#eeeeee","x":29,"y":75,"url":""},"published":{"state":"published","label":"Published","color":"#99ff33","x":0,"y":327,"url":""},"rejected":{"state":"rejected","label":"Rejected","color":"#ff6633","x":177.5,"y":327,"url":""},"submitted":{"state":"submitted","label":"Submitted","color":"#eeeeee","x":15.5,"y":159,"url":""},"waiting":{"state":"waiting","label":"Waiting","color":"#eeeeee","x":12.5,"y":243,"url":""}},"virtualStates":{"__start__":{"state":"__start__","label":"","color":"#000"},"__end__":{"state":"__end__","label":"","color":"#000"}},"actions":{"accept":{"label":"accept","color":"#522900","transitions":{"submitted-u38ilik9":{"label":"accept","color":"#522900","targets":["waiting"],"dagrePath":[{"x":1634.041874504803,"y":1692.6520441940443},{"x":1644,"y":1718},{"x":1650.0005551555905,"y":1743.2023316534803}]},"submitted-9umr6bt9":{"label":"accept","color":"#522900","targets":["published"],"dagrePath":[{"x":1614.669906526573,"y":1691.6192442285198},{"x":1593,"y":1718},{"x":1593,"y":1760},{"x":1593,"y":1802},{"x":1637.6748783248988,"y":1841.5482529433532}]},"submitted":{"label":"accept","color":"#522900","targets":["submitted"]}}},"return":{"label":"return","color":"#008080","transitions":{"submitted":{"label":"return","color":"#008080","targets":["draft","submitted"]}}},"submit":{"label":"submit","color":"#0000CC","transitions":{"draft-hz9nqaor":{"label":"submit","color":"#0000CC","targets":["submitted"],"dagrePath":[{"x":1624.6961097227613,"y":1608.823341663432},{"x":1620.5,"y":1634},{"x":1624.6773727177974,"y":1659.064236306785}]}}},"reject":{"label":"reject","color":"#1b0a33","transitions":{"submitted-wroirudi":{"label":"reject","color":"#1b0a33","targets":["rejected"],"dagrePath":[{"x":1602.3092290823267,"y":1686.741242421749},{"x":1529,"y":1718},{"x":1529,"y":1743}]},"submitted":{"label":"reject","color":"#1b0a33","targets":["submitted"]}}},"withdraw":{"label":"withdraw","color":"#003d00","transitions":{"submitted-qlac3di":{"label":"withdraw","color":"#003d00","targets":["draft"],"dagrePath":[{"x":1632.6942661068624,"y":1659.2185248855217},{"x":1640.5,"y":1634},{"x":1632.580198760457,"y":1608.4129498414766}]},"submitted":{"label":"withdraw","color":"#003d00","targets":["submitted"]}}},"create":{"label":"Create","color":"#444444","transitions":{"-w093haor":{"label":"create","color":"#444444","targets":["draft"],"dagrePath":[{"x":1631.594290193494,"y":1524.310452481233},{"x":1640.5,"y":1550},{"x":1632.580198760457,"y":1575.5870501585234}]}},"heading":"New article","returns":"new_id","block":{"inputs":{"item":null},"outputs":{"ref":"return_value"}}},"edit":{"label":"Edit","color":"#D11975","transitions":{"submitted-kila0pb9":{"label":"edit","color":"#D11975","targets":["submitted"],"dagrePath":[{"x":1656.9274154186633,"y":1668.7846241040777},{"x":1696.8333333333333,"y":1659},{"x":1702.6666666666667,"y":1659},{"x":1708.5,"y":1676},{"x":1702.6666666666667,"y":1693},{"x":1696.8333333333333,"y":1693},{"x":1656.9274154186633,"y":1683.2153758959223}]},"draft-ues9vn29":{"label":"edit","color":"#D11975","targets":["draft"],"dagrePath":[{"x":1645.9095175822558,"y":1586.3947140495818},{"x":1683.3333333333333,"y":1575},{"x":1689.1666666666667,"y":1575},{"x":1695,"y":1592},{"x":1689.1666666666667,"y":1609},{"x":1683.3333333333333,"y":1609},{"x":1645.9095175822558,"y":1597.6052859504182}]}},"heading":"Edit article","block":{"inputs":{"ref":null,"item":null},"outputs":[]}},"publish":{"label":"publish","color":"#000000","transitions":{"waiting-ptceg66r":{"label":"publish","color":"#000000","targets":["published"],"dagrePath":[{"x":1654,"y":1777},{"x":1654,"y":1802},{"x":1654,"y":1839}]}}},"hide":{"label":"hide","color":"#3d0099","transitions":{"published-r0um1jor":{"label":"hide","color":"#3d0099","targets":["submitted"],"dagrePath":[{"x":1670.3251216751012,"y":1841.5482529433532},{"x":1715,"y":1802},{"x":1715,"y":1760},{"x":1715,"y":1718},{"x":1651.445812311702,"y":1687.493989909617}]},"waiting-bb70t3xr":{"label":"hide","color":"#3d0099","targets":["submitted"],"dagrePath":[{"x":1661.9048255220055,"y":1743.804747711013},{"x":1674.5,"y":1718},{"x":1643.9179507783497,"y":1690.6713602700147}]},"submitted":{"label":"hide","color":"#3d0099","targets":["submitted"]}}},"listing":{"label":"listing","color":"#754719","transitions":{},"heading":"Articles"},"show":{"label":"show","color":"#00B200","transitions":{},"heading":"{title}","heading_without_links":true},"remove":{"label":"remove","color":"#942192","transitions":{"rejected-w2ny7gb9":{"label":"remove","color":"#942192","targets":[""],"dagrePath":[{"x":1706.5,"y":1861},{"x":1706.5,"y":1886},{"x":1620.1744787389894,"y":1919.0327249723255}]},"waiting-71oflxr":{"label":"remove","color":"#942192","targets":[""],"dagrePath":[{"x":1560.3103610664248,"y":1768.8080304306716},{"x":1642.5,"y":1802},{"x":1642.5,"y":1844},{"x":1642.5,"y":1886},{"x":1616.8961111479089,"y":1914.2395832927475}]},"published-g6z85mi":{"label":"remove","color":"#942192","targets":[""],"dagrePath":[{"x":1531,"y":1861},{"x":1531,"y":1886},{"x":1597.248009357306,"y":1918.0554883986965}]},"submitted":{"label":"remove","color":"#942192","targets":["submitted"]}}}},"class":"ExampleApplication\\UniversalStateMachine","include":["article.graphml"],"name":"Article","desc":"Article","table":"article","flupdo_resource":"database","io_name":"item","url":"/article/{id}","parent_url":"/article","default_access_policy":null,"state_select":"state","properties":{"id":{"type":"number","label":"ID","is_pk":true,"link":"/article/{id}","calculated":true},"title":{"type":"text","label":"Title","required":true,"link":"/article/{id}"},"state":{"type":"text","label":"State","calculated":true},"perex":{"type":"textarea","label":"Perex","required":true,"tabular_hidden":true,"class":"perex","rows":10},"body_md":{"type":"markdownarea","label":"Text","required":true,"tabular_hidden":true,"rows":24},"created":{"type":"datetime","label":"Created","format":"%Y-%m-%d %H:%M","readonly":true,"tabular_hidden":false,"tabular_width":84,"calculated":true},"modified":{"type":"datetime","label":"Modified","format":"%Y-%m-%d %H:%M","readonly":true,"tabular_hidden":false,"tabular_width":84,"calculated":true}},"default_filters":{"order_by":"created","order_asc":false}}
</textarea>
	<!--{"states":{"draft":{"state":"draft","label":"Draft","color":"#eeeeee","url":""},"published":{"state":"published","label":"Published","color":"#99ff33","url":""},"rejected":{"state":"rejected","label":"Rejected","color":"#ff6633","url":""},"submitted":{"state":"submitted","label":"Submitted","color":"#eeeeee","url":""},"waiting":{"state":"waiting","label":"Waiting","color":"#eeeeee","url":""}},"virtualStates":{"__start__":{"state":"__start__","label":"","color":"#000"},"__end__":{"state":"__end__","label":"","color":"#000"}},"actions":{"accept":{"label":"accept","color":"#522900","transitions":{"submitted-ayfu5wmi":{"label":"accept","color":"#522900","targets":["waiting"],"dagrePath":[{"x":1634.041874504803,"y":1692.6520441940443},{"x":1644,"y":1718},{"x":1650.0005551555905,"y":1743.2023316534803}]},"submitted-xyhtcsor":{"label":"accept","color":"#522900","targets":["published"],"dagrePath":[{"x":1614.669906526573,"y":1691.6192442285198},{"x":1593,"y":1718},{"x":1593,"y":1760},{"x":1593,"y":1802},{"x":1637.6748783248988,"y":1841.5482529433532}]}}},"return":{"label":"return","color":"#008080","transitions":{"submitted":{"label":"return","color":"#008080","targets":["draft"]}}},"submit":{"label":"submit","color":"#0000CC","transitions":{"draft-a2lnmi":{"label":"submit","color":"#0000CC","targets":["submitted"],"dagrePath":[{"x":1624.6961097227613,"y":1608.823341663432},{"x":1620.5,"y":1634},{"x":1624.6773727177974,"y":1659.064236306785}]}}},"reject":{"label":"reject","color":"#1b0a33","transitions":{"submitted-f86ywrk9":{"label":"reject","color":"#1b0a33","targets":["rejected"],"dagrePath":[{"x":1602.3092290823267,"y":1686.741242421749},{"x":1529,"y":1718},{"x":1529,"y":1743}]}}},"withdraw":{"label":"withdraw","color":"#003D00","transitions":{"submitted-x672e29":{"label":"withdraw","color":"#003D00","targets":["draft"],"dagrePath":[{"x":1632.6942661068624,"y":1659.2185248855217},{"x":1640.5,"y":1634},{"x":1632.580198760457,"y":1608.4129498414766}]}}},"create":{"label":"Create","color":"#444444","transitions":{"-mgta9k9":{"label":"create","color":"#444444","targets":["draft"],"dagrePath":[{"x":1631.594290193494,"y":1524.310452481233},{"x":1640.5,"y":1550},{"x":1632.580198760457,"y":1575.5870501585234}]}},"heading":"New article","returns":"new_id","block":{"inputs":{"item":null},"outputs":{"ref":"return_value"}}},"edit":{"label":"Edit","color":"#D11975","transitions":{"submitted-34xqolxr":{"label":"edit","color":"#D11975","targets":["submitted"],"dagrePath":[{"x":1656.9274154186633,"y":1668.7846241040777},{"x":1696.8333333333333,"y":1659},{"x":1702.6666666666667,"y":1659},{"x":1708.5,"y":1676},{"x":1702.6666666666667,"y":1693},{"x":1696.8333333333333,"y":1693},{"x":1656.9274154186633,"y":1683.2153758959223}]},"draft-95imgqfr":{"label":"edit","color":"#D11975","targets":["draft"],"dagrePath":[{"x":1645.9095175822558,"y":1586.3947140495818},{"x":1683.3333333333333,"y":1575},{"x":1689.1666666666667,"y":1575},{"x":1695,"y":1592},{"x":1689.1666666666667,"y":1609},{"x":1683.3333333333333,"y":1609},{"x":1645.9095175822558,"y":1597.6052859504182}]}},"heading":"Edit article","block":{"inputs":{"ref":null,"item":null},"outputs":[]}},"publish":{"label":"publish","color":"#000000","transitions":{"waiting-5vmwjyvi":{"label":"publish","color":"#000000","targets":["published"],"dagrePath":[{"x":1654,"y":1777},{"x":1654,"y":1802},{"x":1654,"y":1839}]}}},"hide":{"label":"hide","color":"#3D0099","transitions":{"published-kbt3ayvi":{"label":"hide","color":"#3D0099","targets":["submitted"],"dagrePath":[{"x":1670.3251216751012,"y":1841.5482529433532},{"x":1715,"y":1802},{"x":1715,"y":1760},{"x":1715,"y":1718},{"x":1651.445812311702,"y":1687.493989909617}]},"waiting-c97iizfr":{"label":"hide","color":"#3D0099","targets":["submitted"],"dagrePath":[{"x":1661.9048255220055,"y":1743.804747711013},{"x":1674.5,"y":1718},{"x":1643.9179507783497,"y":1690.6713602700147}]}}},"listing":{"label":"listing","color":"#754719","transitions":{},"heading":"Articles"},"show":{"label":"show","color":"#00B200","transitions":{},"heading":"{title}","heading_without_links":true},"remove":{"label":"remove","color":"#942192","transitions":{"rejected":{"label":"remove","color":"#942192","targets":[""]},"waiting":{"label":"remove","color":"#942192","targets":[""]},"published":{"label":"remove","color":"#942192","targets":[""]}}}},"class":"ExampleApplication\\UniversalStateMachine","include":["article.graphml"],"name":"Article","desc":"Article","table":"article","flupdo_resource":"database","io_name":"item","url":"/article/{id}","parent_url":"/article","default_access_policy":null,"state_select":"state","properties":{"id":{"type":"number","label":"ID","is_pk":true,"link":"/article/{id}","calculated":true},"title":{"type":"text","label":"Title","required":true,"link":"/article/{id}"},"state":{"type":"text","label":"State","calculated":true},"perex":{"type":"textarea","label":"Perex","required":true,"tabular_hidden":true,"class":"perex","rows":10},"body_md":{"type":"markdownarea","label":"Text","required":true,"tabular_hidden":true,"rows":24},"created":{"type":"datetime","label":"Created","format":"%Y-%m-%d %H:%M","readonly":true,"tabular_hidden":false,"tabular_width":84,"calculated":true},"modified":{"type":"datetime","label":"Modified","format":"%Y-%m-%d %H:%M","readonly":true,"tabular_hidden":false,"tabular_width":84,"calculated":true}},"default_filters":{"order_by":"created","order_asc":false}}-->

</body>
</html>
